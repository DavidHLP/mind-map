---
markmap:
  colorFreezeLevel: 2
---

# 使用 HashMap 时, 有哪些提升性能的技巧

## 使用 HashMap 时的性能优化技巧

### 1. 合理设置初始容量

- 如果可以预估数据量大小，创建时指定合适的初始容量
- 避免频繁扩容
- 默认初始容量：16

### 2. 调整负载因子

- 默认负载因子：0.75
- 低负载因子
  - 冲突少
  - 查找效率高
  - 内存占用多
- 高负载因子
  - 节省内存
  - 冲突多
  - 查找效率可能下降

### 3. 确保 `hashCode` 均匀分布

- 自定义 key 时，需重写高质量的 `hashCode()`
- 避免大量键映射到同一槽位
- 减少哈希冲突

---

## 扩展：HashMap 扩容机制的性能影响

### 扩容触发条件

- 元素数量超过 **容量 × 负载因子**

### 扩容过程

- 容量变为原来的 **2 倍**
- 所有键值对 **重新哈希分配**

### 性能影响

- 扩容耗时，涉及重新计算索引和分配
- 大量数据时，频繁扩容显著降低性能

---

## 其他优化方案

- **LinkedHashMap**

  - 保留插入顺序
  - 避免额外排序

- **TreeMap**

  - 按 key 排序存储

- **ConcurrentHashMap**
  - 线程安全场景使用
