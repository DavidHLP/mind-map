{"layout":"logicalStructure","root":{"data":{"text":"<p>MyBatis写个Xml映射文件,再写个DAO接口就能执行,这个原理是什么?</p>","expand":true,"uid":"596763ae-8ae8-40cc-87b4-86744c0e7f01","richText":true,"isActive":false,"imgMap":{}},"children":[{"data":{"text":"<p>核心原理是 JDBC 的能力 和 动态代理，通过解析 XML 映射文件和动态生成 DAO 接口实现类来完成 SQL的执行</p>","generalization":[],"uid":"b1c8e927-fe6e-4b9d-a41d-a4d50a5e35df","richText":true,"expand":true,"isActive":false},"children":[]},{"data":{"text":"<p>加载配置和 Mapper 映射文件</p>","uid":"602a3437-1e22-4971-8abd-add23e9a4fbb","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>MyBatis 启动时，通过mybatis - config.xml加载数据库连接信息与Mapper.xml</p>","uid":"47b5f620-c586-401b-9c89-20faeb218f50","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>Mapper.xml里的 SQL 会被解析为含 SQL 语句、参数及返回结果映射规则的MappedStatement对象</p>","uid":"9c3c79ec-0a12-4e95-b877-eb1cbbf37a59","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>动态代理实现 DAO 接口</p>","uid":"476e8661-e1d5-4105-9bf6-47a8f8caf800","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>MyBatis 为每个 DAO 接口生成MapperProxy动态代理类，拦截接口方法调用</p>","uid":"2a3d0457-16b3-4d61-a37a-2dd60321ec41","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>MapperProxy动态代理类依据方法名和参数匹配MappedStatement，再调用 JDBC 执行 SQL</p>","uid":"2115a2f6-757a-4566-88be-82cf305338fd","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>通过 JDBC 执行 SQL</p>","uid":"172b580a-469d-4310-8cbd-eea56756154f","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>MyBatis 的SqlSession封装 JDBC，用PreparedStatement执行 SQL</p>","uid":"97b45961-fe7e-4d5e-a752-c73ad94064bf","expand":true,"richText":true,"isActive":false},"children":[]},{"data":{"text":"<p>结合 XML 中定义的 SQL 与 DAO 接口方法传入的参数，生成完整 SQL 查询，将参数绑定到PreparedStatement，最终通过 JDBC 执行并获取ResultSet</p>","uid":"b57ee5ce-0f98-4703-8ff4-c6f7548ac947","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>结果映射：</p>","uid":"68906a14-8801-4c0b-9971-7986ff5551bc","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>JDBC 的ResultSet会被 MyBatis 的ResultMap或resultType映射为 DAO 接口方法的返回值类型（如 POJO、Map、List 等）</p>","uid":"8af541ba-5537-430c-a237-683748aa111a","expand":true,"richText":true,"isActive":false},"children":[]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-1239,"translateY":-202,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-1239,"f":-202},"state":{"scale":1,"x":-1239,"y":-202,"sx":-1239,"sy":-201}}}