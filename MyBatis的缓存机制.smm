{"layout":"logicalStructure","root":{"data":{"text":"<p>说说MyBatis的缓存机制</p>","expand":true,"uid":"7015da40-701c-4af0-ad00-68a70d953fea","richText":true,"isActive":false,"imgMap":{}},"children":[{"data":{"text":"<p>一级缓存(SqlSession级别)</p>","generalization":[],"uid":"fbaf8b6a-26e7-4cb8-bb0f-9be7d11e854c","richText":true,"expand":true,"isActive":false},"children":[{"data":{"text":"<p>生效范围</p>","uid":"92167b8b-9ff9-4b68-bf63-334525b0b593","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>仅在同一个SqlSession内有效，跨SqlSession不共享。</p>","uid":"45eec9fc-52e0-4702-b7ce-ade39c875924","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>唯一标识</p>","uid":"aa7c777c-141f-4230-ad02-c38327da212e","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>基于<strong>命名空间</strong>、<strong>SQL语句</strong>、<strong>参数</strong>三者共同确定缓存项</p>","uid":"9d1ac21a-a88d-4383-90fe-343ef8245b74","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>默认状态</p>","uid":"abc57e71-761d-4311-a3fd-26c8a8c986c9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>默认开启，无需额外配置</p>","uid":"97bd7ab3-8835-4b25-9f14-046226902ff0","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>生命周期</p>","uid":"dd6dcbaf-72bf-4b8a-80c4-b9f8f3d55deb","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>与所属SqlSession完全一致，SqlSession关闭则缓存失效。</p>","uid":"7a708ee3-081e-4a10-9d9e-3b7d5be3ea2e","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>清空场景</p>","uid":"ffb3e511-ad68-4c5c-9808-17bbfc4f1c54","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>执行commit操作、执行rollback操作、手动清理缓存时，缓存会被清空。</p>","uid":"946f1227-e5c0-492d-8723-3b727b04bb59","expand":true,"richText":true,"isActive":false},"children":[]}]}]},{"data":{"text":"<p>二级缓存（Mapper 级别）</p>","uid":"c00d5f5f-739e-485f-95e7-d0b8079fdcb5","expand":true,"richText":true,"isActive":false,"note":"1. **分布式缓存方案**：建议生产环境采用 Redis 结合 Spring Cache，适用于多服务节点共享缓存数据的场景，可提升跨服务数据访问效率。\n2. **本地缓存方案**：若仅需单服务节点内缓存数据，可选用 Guava 或 Caffeine 实现，能减少分布式调用开销，提升本地数据读取速度。"},"children":[{"data":{"text":"<p>生效范围</p>","uid":"4b48ed71-a343-4462-84d0-a33ef46929fb","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>跨SqlSession共享，基于Mapper（接口/XML）维度</p>","uid":"792df319-75f0-4516-b234-edca59bdeb7a","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>开启方式</p>","uid":"6c7db4ee-1742-4ea5-ae20-ec9fea21baf9","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>需手动配置，在对应的Mapper XML文件中添加`&lt;cache/&gt;`标签。</p>","uid":"7e9e9275-49c6-4ebd-87d3-8e1fa6b28203","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>生命周期</p>","uid":"ee74eb79-cb06-4859-a1ad-722f1d85058b","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>与SqlSessionFactory一致，随工厂创建而存在、销毁而消失。</p>","uid":"e6ddbd17-8f9d-499e-9b4f-2be8cff355fc","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>缓存失效</p>","uid":"63182aed-480f-462e-9bd8-d5d5e8a50057","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>执行更新（update）、插入（insert）、删除（delete）操作时，相关Mapper的缓存会失效。</p>","uid":"9790dd0e-0b92-44e9-9132-ad29419b63be","expand":true,"richText":true,"isActive":false},"children":[]}]},{"data":{"text":"<p>存储特性</p>","uid":"3ee7cf66-0f32-4312-bbb0-24cf7c14b6a8","expand":true,"richText":true,"isActive":false},"children":[{"data":{"text":"<p>支持定制化，可整合第三方缓存工具实现存储</p>","uid":"4475ff67-41ae-40d8-a268-7bec9e2729fa","expand":true,"richText":true,"isActive":false},"children":[]}]}]}],"smmVersion":"0.14.0-fix.1"},"theme":{"template":"classic4","config":{}},"view":{"transform":{"scaleX":1,"scaleY":1,"shear":0,"rotate":0,"translateX":-823,"translateY":-125,"originX":0,"originY":0,"a":1,"b":0,"c":0,"d":1,"e":-823,"f":-125},"state":{"scale":1,"x":-823,"y":-125,"sx":-823,"sy":-125}}}