# MySQL InnoDB 聚簇索引 vs 非聚簇索引

## 1. 聚簇索引（Clustered Index）

### 基本特点

- 索引叶子节点存储的是**完整数据行**，可以直接访问完整数据
- 每个表只能有一个聚簇索引，通常是**主键索引**
- 适合范围查询和排序

### 存储逻辑

- **非叶子节点**：存储主键和页号（Page Number）
- **叶子节点**：
  - 存储完整的数据行
  - 叶子节点之间通过双向链表链接，便于范围查询
  - 内部有页目录，记录通过单链表存储，通过页目录二分+遍历链表快速定位
- **B+ 树作用**：帮助快速定位页，而不是记录本身
- **页大小**：默认 16KB
- **页分裂**：主键要求有序，否则插入无序数据会导致页中间插入、页分裂，影响性能

---

## 2. 非聚簇索引（Secondary Index / 二级索引）

### 基本特点

- 索引叶子节点存储的是**索引列值 + 对应主键**，不包含完整行数据
- 一个表可以有多个非聚簇索引
- 适合快速查找特定列的数据

### 存储逻辑

- 查询时先通过非聚簇索引找到主键
- 然后通过主键回聚簇索引获取完整数据（**回表查询**）
- 叶子节点不存完整行，只存索引列和主键

---

## 面试速记

- **聚簇索引**：叶子节点存完整数据，一张表只能有一个，适合范围查询，主键索引默认聚簇
- **非聚簇索引**：叶子节点存索引列+主键，可多个，查询需回表
- **区别总结**：
  1. 数据存储位置：聚簇存整行，非聚簇存索引+主键
  2. 表限制：聚簇一个，非聚簇多个
  3. 查询方式：聚簇直接查数据，非聚簇需回表
  4. 性能特点：聚簇适合范围排序，非聚簇适合精确查找
